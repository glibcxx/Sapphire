#include "BgfxFrameExtractor.h"

namespace mce::framebuilder::bgfxbridge {

    void BgfxFrameExtractor::_insert(
        const EntityCreationContext &entityContext,
        const RenderSkyDescription  &description
    ) {
        using Fn = void (BgfxFrameExtractor::*)(const EntityCreationContext &, const RenderSkyDescription &);
        using Hook = sapphire::ApiLoader<
#if MC_VERSION == v1_21_2
            "\x48\x89\x5C\x24\x00\x55\x56\x57\x41\x54\x41\x55\x41\x56\x41\x57\x48\x8D\xAC\x24\x00\x00\x00\x00\x48\x81\xEC\x00\x00\x00\x00\x0F\x29\xB4\x24\x00\x00\x00\x00\x48\x8B\x05\x00\x00\x00\x00\x48\x33\xC4\x48\x89\x85\x00\x00\x00\x00\x49\x8B\xF0\x4C\x8B\xE2\x45\x33\xED"_sig,
#elif MC_VERSION == v1_21_50 || MC_VERSION == v1_21_60
            "\x48\x89\x5C\x24\x00\x55\x56\x57\x41\x54\x41\x55\x41\x56\x41\x57\x48\x8D\xAC\x24\x00\x00\x00\x00\x48\x81\xEC\x00\x00\x00\x00\x48\x8B\x05\x00\x00\x00\x00\x48\x33\xC4\x48\x89\x85\x00\x00\x00\x00\x4D\x8B\xF8\x4C\x8B\xEA\x33\xFF"_sig,
#endif
            (Fn)&BgfxFrameExtractor::_insert>;
        (this->*Hook::origin)(entityContext, description);
    }

    void BgfxFrameExtractor::_insert(const EntityCreationContext &entityContext, const RenderUIGamefaceDescription &description) {
        using Fn = void (BgfxFrameExtractor::*)(const EntityCreationContext &, const RenderUIGamefaceDescription &);
        using Hook = sapphire::ApiLoader<
            "\x48\x89\x5C\x24\x00\x55\x56\x57\x41\x54\x41\x55\x41\x56\x41\x57\x48\x8D\xAC\x24\x00\x00\x00\x00\xB8\x00\x00\x00\x00\xE8\x00\x00\x00\x00\x48\x2B\xE0\x0F\x29\xB4\x24\x00\x00\x00\x00\x0F\x29\xBC\x24\x00\x00\x00\x00\x44\x0F\x29\x84\x24\x00\x00\x00\x00\x44\x0F\x29\x8C\x24\x00\x00\x00\x00\x44\x0F\x29\x94\x24\x00\x00\x00\x00\x44\x0F\x29\x9C\x24\x00\x00\x00\x00\x44\x0F\x29\xA4\x24\x00\x00\x00\x00\x44\x0F\x29\xAC\x24\x00\x00\x00\x00\x44\x0F\x29\xB4\x24\x00\x00\x00\x00\x44\x0F\x29\xBC\x24\x00\x00\x00\x00\x48\x8B\x05\x00\x00\x00\x00\x48\x33\xC4\x48\x89\x85\x00\x00\x00\x00\x4D\x8B\xF0\x48\x8B\xFA"_sig,
            (Fn)&BgfxFrameExtractor::_insert>;
        (this->*Hook::origin)(entityContext, description);
    }

    void BgfxFrameExtractor::_insert(const EntityCreationContext &entityContext, const BlitFlipbookTextureDescription &descriptions) {
        using Fn = void (BgfxFrameExtractor::*)(const EntityCreationContext &, const BlitFlipbookTextureDescription &);
        using Hook = sapphire::ApiLoader<
            "\x48\x8B\xC4\x48\x89\x58\x00\x55\x56\x57\x41\x54\x41\x55\x41\x56\x41\x57\x48\x8D\xA8\x00\x00\x00\x00\x48\x81\xEC\x00\x00\x00\x00\x0F\x29\x70\x00\x0F\x29\x78\x00\x44\x0F\x29\x40\x00\x44\x0F\x29\x48\x00\x48\x8B\x05\x00\x00\x00\x00\x48\x33\xC4\x48\x89\x85\x00\x00\x00\x00\x4D\x8B\xE8\x4C\x8B\xE2"_sig,
            (Fn)&BgfxFrameExtractor::_insert>;
        (this->*Hook::origin)(entityContext, descriptions);
    }

} // namespace mce::framebuilder::bgfxbridge