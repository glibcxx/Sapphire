#include "LocalPlayer.h"

/*
    ctor:
        1.21.2     \xE8\x00\x00\x00\x00\x48\x8B\xF0\x48\x89\x33\x48\x8B\xC3\x48\x81\xC4\x00\x00\x00\x00\x41\x5F\x41\x5E\x41\x5D
        1.21.50    \xE8\x00\x00\x00\x00\x48\x8B\xF8\x48\x89\x3B\x48\x8B\xC3\x48\x8B\x9C\x24\x00\x00\x00\x00\x48\x81\xC4\x00\x00\x00\x00\x41\x5F\x41\x5E\x41\x5D\x41\x5C\x5F\x5E\x5D\xC3
        1.21.60    \xE8\x00\x00\x00\x00\x48\x8B\xD8\x33\xFF\xEB\x00\x33\xFF\x8B\xDF\x48\x89\x5D
*/

void LocalPlayer::localPlayerTurn(const Vec2 &deltaRot) {
    using Hook = sapphire::ApiLoader<
#if MC_VERSION == v1_21_2
        sapphire::deRefCall | "\xE8\x00\x00\x00\x00\x90\x48\x85\xF6\x74\x00\x48\x8B\xCE\xE8\x00\x00\x00\x00\x0F\x28\xCE"_sig,
#elif MC_VERSION == v1_21_50 || MC_VERSION == v1_21_60
        sapphire::deRefCall | "\xE8\x00\x00\x00\x00\x49\x8B\x06\x0F\x28\xCE"_sig,
#endif
        &LocalPlayer::localPlayerTurn>;
    (this->*Hook::origin)(deltaRot);
}