#include "BlockTessellator.h"
#include "SDK/core/ApiManager.h"

BlockTessellator *BlockTessellator::ctor(BlockSource *level) {
    using Hook = sapphire::ApiLoader<
#if MC_VERSION == v1_21_2
        "\x48\x89\x5C\x24\x00\x55\x56\x57\x41\x56\x41\x57\x48\x81\xEC\x00\x00\x00\x00\x4C\x8B\xF2\x48\x8B\xF1"_sig,
#elif MC_VERSION == v1_21_50 || MC_VERSION == v1_21_60
        "\x48\x89\x5C\x24\x00\x55\x56\x57\x41\x54\x41\x55\x41\x56\x41\x57\x48\x8D\x6C\x24\x00\x48\x81\xEC\xC0\x00\x00\x00\x4C\x8B\xFA\x48\x8B\xF9\x48\x89\x4D"_sig,
#endif
        &BlockTessellator::ctor>;
    return (this->*Hook::origin)(level);
}

void BlockTessellator::dtor() noexcept {
    using Hook = sapphire::ApiLoader<
#if MC_VERSION == v1_21_2
        "\x48\x89\x5C\x24\x00\x57\x48\x83\xEC\x00\x48\x8B\xD9\x48\x81\xC1\x00\x00\x00\x00\xE8\x00\x00\x00\x00\x48\x8D\x8B\x00\x00\x00\x00\xE8\x00\x00\x00\x00\x48\x8D\x8B\x00\x00\x00\x00\xE8\x00\x00\x00\x00\x48\x8D\x8B\x00\x00\x00\x00\xE8\x00\x00\x00\x00\x48\x8D\x8B\x00\x00\x00\x00\xE8\x00\x00\x00\x00\x48\x8D\x8B\x00\x00\x00\x00\xE8\x00\x00\x00\x00\x48\x8D\xBB"_sig,
#elif MC_VERSION == v1_21_50 || MC_VERSION == v1_21_60
        "\x48\x89\x5C\x24\x00\x48\x89\x6C\x24\x00\x48\x89\x74\x24\x00\x57\x48\x83\xEC\x00\x48\x8B\xD9\x48\x81\xC1\x00\x00\x00\x00\xE8\x00\x00\x00\x00\x48\x8B\x8B\x00\x00\x00\x00\x33\xED\x48\x85\xC9\x74\x00\x48\x8B\x93"_sig,
#endif
        &BlockTessellator::dtor>;
    (this->*Hook::origin)();
}