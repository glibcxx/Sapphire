#include "ActorRenderer.h"

ActorRenderer *ActorRenderer::ctor(
    std::shared_ptr<Model>             model,
    std::shared_ptr<mce::TextureGroup> textures,
    const Vec2                        &renderDim,
    const Vec3                        &renderDimOffset,
    const bool                         hasWaterHole
) {
    using Fn = ActorRenderer *(ActorRenderer::*)(std::shared_ptr<Model>, std::shared_ptr<mce::TextureGroup>, const Vec2 &, const Vec3 &, const bool);
    using Hook = sapphire::ApiLoader<
#if MC_VERSION == v1_21_2
        "\x48\x8B\xC4\x48\x89\x58\x00\x55\x56\x57\x41\x54\x41\x55\x41\x56\x41\x57\x48\x8D\xA8\x00\x00\x00\x00\x48\x81\xEC\x00\x00\x00\x00\x0F\x29\x70\x00\x0F\x29\x78\x00\x4D\x8B\xE9"_sig,
#elif MC_VERSION == v1_21_50 || MC_VERSION == v1_21_60
        "\x48\x8B\xC4\x48\x89\x58\x00\x55\x56\x57\x41\x54\x41\x55\x41\x56\x41\x57\x48\x8D\xA8\x00\x00\x00\x00\x48\x81\xEC\x00\x00\x00\x00\x0F\x29\x70\x00\x0F\x29\x78\x00\x4C\x89\x4D"_sig,
#endif
        (Fn)&ActorRenderer::ctor>;
    return (this->*Hook::origin)(model, textures, renderDim, renderDimOffset, hasWaterHole);
}

ActorRenderer *ActorRenderer::ctor(
    std::shared_ptr<mce::TextureGroup> textures, const Vec2 &renderDim, const Vec3 &renderDimOffset, const bool hasWaterHole
) {
    using Fn = ActorRenderer *(ActorRenderer::*)(std::shared_ptr<mce::TextureGroup>, const Vec2 &, const Vec3 &, const bool);
    using Hook = sapphire::ApiLoader<
#if MC_VERSION == v1_21_2
        "\x48\x8B\xC4\x48\x89\x58\x00\x55\x56\x57\x41\x54\x41\x55\x41\x56\x41\x57\x48\x8D\x6C\x24\x00\x48\x81\xEC\x00\x00\x00\x00\x0F\x29\x70\x00\x0F\x29\x78\x00\x4D\x8B\xE1"_sig,
#elif MC_VERSION == v1_21_50 || MC_VERSION == v1_21_60
        "\x48\x8B\xC4\x48\x89\x58\x00\x55\x56\x57\x41\x54\x41\x55\x41\x56\x41\x57\x48\x8D\xA8\x00\x00\x00\x00\x48\x81\xEC\x00\x00\x00\x00\x0F\x29\x70\x00\x0F\x29\x78\x00\x4D\x8B\xE9"_sig,
#endif
        (Fn)&ActorRenderer::ctor>;
    return (this->*Hook::origin)(textures, renderDim, renderDimOffset, hasWaterHole);
}

void ActorRenderer::_drawRopeRange(
    BaseActorRenderContext &renderContext,
    int                     begin,
    int                     end,
    const Vec3             &basisX,
    const Vec3             &basisY,
    const Vec3             &deltaNorm,
    const RopePoints       &nodes,
    mce::TexturePtr        &tex,
    float                   a,
    Vec3                    startPoint,
    Vec3                    endPoint
) {
    using Hook = sapphire::ApiLoader<
#if MC_VERSION == v1_21_2
        "\x48\x8B\xC4\x55\x53\x56\x57\x41\x54\x41\x55\x41\x56\x41\x57\x48\x8D\xA8\x00\x00\x00\x00\x48\x81\xEC\x00\x00\x00\x00\x0F\x29\x70\x00\x0F\x29\x78\x00\x44\x0F\x29\x40\x00\x44\x0F\x29\x88\x00\x00\x00\x00\x44\x0F\x29\x90\x00\x00\x00\x00\x44\x0F\x29\x98\x00\x00\x00\x00\x44\x0F\x29\xA0\x00\x00\x00\x00\x44\x0F\x29\xA8\x00\x00\x00\x00\x44\x0F\x29\xB0\x00\x00\x00\x00\x44\x0F\x29\xB8\x00\x00\x00\x00\x48\x8B\x05\x00\x00\x00\x00\x48\x33\xC4\x48\x89\x85\x00\x00\x00\x00\x45\x8B\xE1"_sig,
#elif MC_VERSION == v1_21_50 || MC_VERSION == v1_21_60
        "\x48\x8B\xC4\x55\x53\x56\x57\x41\x54\x41\x55\x41\x56\x41\x57\x48\x8D\xA8\x00\x00\x00\x00\x48\x81\xEC\x00\x00\x00\x00\x0F\x29\x70\x00\x0F\x29\x78\x00\x44\x0F\x29\x40\x00\x44\x0F\x29\x88\x00\x00\x00\x00\x44\x0F\x29\x90\x00\x00\x00\x00\x44\x0F\x29\x98\x00\x00\x00\x00\x44\x0F\x29\xA0\x00\x00\x00\x00\x44\x0F\x29\xA8\x00\x00\x00\x00\x44\x0F\x29\xB0\x00\x00\x00\x00\x44\x0F\x29\xB8\x00\x00\x00\x00\x48\x8B\x05\x00\x00\x00\x00\x48\x33\xC4\x48\x89\x85\x00\x00\x00\x00\x45\x8B\xE9"_sig,
#endif
        &ActorRenderer::_drawRopeRange>;
    return (this->*Hook::origin)(renderContext, begin, end, basisX, basisY, deltaNorm, nodes, tex, a, startPoint, endPoint);
}